(()=>{var e={};e.id=69966,e.ids=[69966],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},65094:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>p,routeModule:()=>h,tree:()=>c});var s=a(73137),r=a(54647),n=a(4183),i=a.n(n),l=a(71775),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=s.AppPageRouteModule,c=["",{children:["admin2",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,94328)),"/app/app/admin2/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,70549)),"/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,51918,23)),"next/dist/client/components/not-found-error"]}],p=["/app/app/admin2/page.tsx"],x="/admin2/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new o({definition:{kind:r.x.APP_PAGE,page:"/admin2/page",pathname:"/admin2",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64034:(e,t,a)=>{Promise.resolve().then(a.bind(a,22134))},22134:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(60080),r=a(9885),n=a(57114);class i{static setItem(e,t){}static getItem(e){return null}static removeItem(e){}static clear(){}}var l=a(22564);async function d(e,t){await fetch("/api/admin2-log",{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":"admin-token"},body:JSON.stringify({timestamp:new Date().toISOString(),user:"admin2",action:e,details:t})})}function o(){(0,n.useRouter)();let[e,t]=(0,r.useState)("applications"),[a,o]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)({open:!1,text:""}),[b,w]=(0,r.useState)(!1),[g,j]=(0,r.useState)({username:"",password:""}),[y,N]=(0,r.useState)(""),[v,f]=(0,r.useState)(!1),[k,C]=(0,r.useState)(3),[S,D]=(0,r.useState)(0);(0,r.useEffect)(()=>{},[]),(0,r.useEffect)(()=>{b&&(m(!0),"applications"===e?fetch("/api/quote").then(e=>e.json()).then(e=>{o(e),m(!1)}):"messages"===e&&fetch("/api/messages").then(e=>e.json()).then(e=>{p(e),m(!1)}))},[b,e]);let T=async e=>{e.preventDefault();let t=l.X.getClientFingerprint(),a=l.X.checkLoginAttempts(t);if(!a.allowed){f(!0),D(a.remainingTime||0),N(`\xc7ok fazla yanlış giriş denemesi. ${l.X.formatRemainingTime(a.remainingTime||0)} sonra tekrar deneyin.`);return}let s=await fetch("/api/admin-users",{headers:{"x-admin-token":"admin-token"}});if(s.ok){let e=await s.json();if(g.username===e.username&&g.password===e.password){l.X.clearLoginAttempts(t),i.setItem("admin2_logged_in","true"),w(!0),N(""),C(3);return}}l.X.recordFailedAttempt(t);let r=l.X.checkLoginAttempts(t);r.allowed?(C(r.attemptsLeft||0),N(`Kullanıcı adı veya şifre hatalı. Kalan deneme hakkı: ${r.attemptsLeft||0}`)):(f(!0),D(r.remainingTime||0),N(`\xc7ok fazla yanlış giriş denemesi. ${l.X.formatRemainingTime(r.remainingTime||0)} sonra tekrar deneyin.`))},A=async e=>{await fetch("/api/quote",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),o(t=>t.filter(t=>t.id!==e)),await d("Başvuru Sil",{id:e})},_=async(e,t)=>{await fetch("/api/quote",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,read:t})}),o(a=>a.map(a=>a.id===e?{...a,read:t}:a)),await d("Başvuru Okundu Durumu Değiştir",{id:e,read:t})},M=async e=>{await fetch("/api/messages",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),p(t=>t.filter(t=>t.id!==e)),await d("Mesaj Sil",{id:e})},P=async(e,t)=>{await fetch("/api/messages",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,read:t})}),p(a=>a.map(a=>a.id===e?{...a,read:t}:a)),await d("Mesaj Okundu Durumu Değiştir",{id:e,read:t})};return b?x?(0,s.jsxs)("div",{className:"text-center py-20",children:["applications"===e?"Başvurular":"Mesajlar"," y\xfckleniyor..."]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8 mt-24",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"2. Admin Paneli"}),(0,s.jsxs)("div",{className:"flex gap-4 mb-8 flex-wrap",children:[s.jsx("button",{onClick:()=>t("applications"),className:`px-4 py-2 rounded ${"applications"===e?"bg-blue-600 text-white":"bg-white border"}`,children:"Başvurular"}),s.jsx("button",{onClick:()=>t("messages"),className:`px-4 py-2 rounded ${"messages"===e?"bg-blue-600 text-white":"bg-white border"}`,children:"Mesajlar"}),s.jsx("button",{onClick:()=>{i.removeItem("admin2_logged_in"),w(!1),j({username:"",password:""}),N("")},className:"px-4 py-2 bg-gray-200 rounded",children:"\xc7ıkış Yap"})]}),(0,s.jsxs)("div",{className:"bg-white rounded shadow p-6",children:["applications"===e&&(0,s.jsxs)("div",{className:"overflow-x-auto",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"\xdccretsiz Teşhis Başvuruları"}),x?s.jsx("div",{children:"Y\xfckleniyor..."}):0===a.length?s.jsx("div",{children:"Başvuru yok."}):(0,s.jsxs)("table",{className:"w-full text-sm border min-w-[900px]",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Ad Soyad"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Telefon"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"E-posta"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Marka"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Model"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sorun"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"A\xe7ıklama"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Lokasyon"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tarih"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Durum"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"İşlem"})]})}),s.jsx("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{className:e.read?"bg-gray-50":"bg-yellow-50",children:[s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.name&&e.name.length>24?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.name}),children:"Detay"}):e.name}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"140px"},children:e.phone&&e.phone.length>18?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.phone}),children:"Detay"}):e.phone}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.email&&e.email.length>24?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.email}),children:"Detay"}):e.email}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"120px"},children:(e.brand||e.tvBrand)&&(e.brand||e.tvBrand).length>18?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.brand||e.tvBrand}),children:"Detay"}):e.brand||e.tvBrand}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"120px"},children:(e.model||e.tvModel)&&(e.model||e.tvModel).length>18?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.model||e.tvModel}),children:"Detay"}):e.model||e.tvModel}),s.jsx("td",{className:"border p-2 whitespace-nowrap",children:e.issue||e.issueType}),s.jsx("td",{className:"border p-2 max-w-xs",style:{maxWidth:"300px"},children:e.issueDescription||e.description?(e.issueDescription||e.description).length>60?(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"truncate inline-block align-middle",style:{maxWidth:"180px",verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.issueDescription||e.description}),s.jsx("button",{className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.issueDescription||e.description}),children:"Detay"})]}):e.issueDescription||e.description:""}),s.jsx("td",{className:"border p-2 whitespace-nowrap",children:e.location}),s.jsx("td",{className:"border p-2 whitespace-nowrap",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,s.jsxs)("td",{className:"border p-2 whitespace-nowrap",children:[e.read?"Okundu":"Yeni",s.jsx("button",{className:"ml-2 text-xs text-blue-600 underline",onClick:()=>_(e.id,!e.read),children:e.read?"Yeniden işaretle":"Okundu yap"})]}),s.jsx("td",{className:"border p-2 whitespace-nowrap",children:s.jsx("button",{className:"text-xs text-red-600 underline",onClick:()=>A(e.id),children:"Sil"})})]},e.id))})]})]}),"messages"===e&&(0,s.jsxs)("div",{className:"overflow-x-auto",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"İletişim Mesajları"}),(0,s.jsxs)("table",{className:"w-full text-sm border min-w-[900px]",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Ad Soyad"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Telefon"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"E-posta"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Konu"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Mesaj"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tarih"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Durum"}),s.jsx("th",{className:"p-2 border whitespace-nowrap",children:"İşlem"})]})}),s.jsx("tbody",{children:c.map(e=>(0,s.jsxs)("tr",{className:e.read?"bg-gray-50":"bg-yellow-50",children:[s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.name&&e.name.length>24?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.name}),children:"Detay"}):e.name}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"140px"},children:e.phone&&e.phone.length>18?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.phone}),children:"Detay"}):e.phone}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.email&&e.email.length>24?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.email}),children:"Detay"}):e.email}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"120px"},children:e.subject&&e.subject.length>18?s.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.subject}),children:"Detay"}):e.subject}),s.jsx("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"300px"},children:e.message&&e.message.length>60?(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"truncate inline-block align-middle",style:{maxWidth:"180px",verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.message}),s.jsx("button",{className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.message}),children:"Detay"})]}):e.message}),s.jsx("td",{className:"border p-2 whitespace-nowrap",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,s.jsxs)("td",{className:"border p-2 whitespace-nowrap",children:[e.read?"Okundu":"Yeni",s.jsx("button",{className:"ml-2 text-xs text-blue-600 underline",onClick:()=>P(e.id,!e.read),children:e.read?"Yeniden işaretle":"Okundu yap"})]}),s.jsx("td",{className:"border p-2 whitespace-nowrap",children:s.jsx("button",{className:"text-xs text-red-600 underline",onClick:()=>{window.confirm("Bu mesajı silmek istediğinizden emin misiniz?")&&M(e.id)},children:"Sil"})})]},e.id))})]})]}),h.open&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-lg w-full relative",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detay"}),s.jsx("div",{className:"text-gray-800 whitespace-pre-line break-words mb-6",style:{maxHeight:"300px",overflowY:"auto"},children:h.text}),s.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-xl",onClick:()=>u({open:!1,text:""}),children:"\xd7"}),s.jsx("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>u({open:!1,text:""}),children:"Kapat"})]})})]})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 pt-32 mt-16",children:(0,s.jsxs)("form",{onSubmit:T,className:"bg-white p-8 rounded shadow w-full max-w-xs",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"2. Admin Paneli Giriş"}),v&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm font-medium",children:"G\xfcvenlik Uyarısı"})]}),(0,s.jsxs)("div",{className:"text-sm mt-1",children:["\xc7ok fazla yanlış giriş denemesi yapıldı.",s.jsx("br",{}),(0,s.jsxs)("strong",{children:[Math.ceil(S/6e4)," dakika"]})," sonra tekrar deneyin."]})]}),s.jsx("input",{type:"text",placeholder:"Kullanıcı Adı",value:g.username,onChange:e=>j(t=>({...t,username:e.target.value})),className:`w-full mb-4 px-3 py-2 border rounded ${v?"bg-gray-100 cursor-not-allowed":""}`,autoFocus:!0,disabled:v}),s.jsx("input",{type:"password",placeholder:"Şifre",value:g.password,onChange:e=>j(t=>({...t,password:e.target.value})),className:`w-full mb-4 px-3 py-2 border rounded ${v?"bg-gray-100 cursor-not-allowed":""}`,disabled:v}),!v&&k<3&&s.jsx("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-3 py-2 rounded mb-4 text-sm",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,s.jsxs)("span",{children:["Kalan deneme hakkı: ",s.jsx("strong",{children:k})]})]})}),y&&s.jsx("div",{className:"mb-4 text-sm text-red-600",children:y}),s.jsx("button",{type:"submit",className:`w-full py-2 rounded font-bold ${v?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,children:v?"Giriş Engellendi":"Giriş Yap"})]})})}},94328:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>d});var s=a(17536);let r=(0,s.createProxy)(String.raw`/app/app/admin2/page.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,d=l}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[60696,9669,22564],()=>a(65094));module.exports=s})();