"use strict";(()=>{var t={};t.id=75382,t.ids=[75382],t.modules={30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:t=>{t.exports=require("fs")},71017:t=>{t.exports=require("path")},41121:(t,e,r)=>{r.r(e),r.d(e,{headerHooks:()=>S,originalPathname:()=>J,requestAsyncStorage:()=>v,routeModule:()=>y,serverHooks:()=>Z,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>k});var s={};r.r(s),r.d(s,{DELETE:()=>h,GET:()=>f,POST:()=>j,PUT:()=>w,dynamic:()=>m,revalidate:()=>p}),r(95655);var i=r(83323),a=r(54647),o=r(66886),n=r(57147),l=r(71017),u=r.n(l),d=r(69542),c=r(66386);let m="force-static",p=86400;async function f(){try{let t=u().join(process.cwd(),"data"),e=u().join(t,"testimonials.json"),r=await n.promises.stat(e).then(()=>!0).catch(()=>!1);if(!r)return o.Z.json([],{status:200});let s=await n.promises.readFile(e,"utf8"),i=JSON.parse(s);return new o.Z(JSON.stringify(i),{status:200,headers:{"Content-Type":"application/json","Cache-Control":"public, max-age=300, s-maxage=300, stale-while-revalidate=600"}})}catch(t){return console.error("Error reading testimonials:",t),o.Z.json({error:"Veriler y\xfcklenemedi."},{status:500})}}async function j(t){try{let e=(0,d.H9)(t);if((0,d.Q)(e,3,3e5))return o.Z.json({error:"\xc7ok fazla istek. 5 dakika sonra tekrar deneyin."},{status:429});let r=await t.json(),s=(0,c.lk)(r);if(!s.isValid)return o.Z.json({error:s.errors.join(" ")},{status:400});let i=u().join(process.cwd(),"data"),a=u().join(i,"testimonials.json"),l=[],m=await n.promises.stat(a).then(()=>!0).catch(()=>!1);if(m){let t=await n.promises.readFile(a,"utf8");l=JSON.parse(t)}let p={id:(l.length+1).toString(),name:(0,c.vJ)(r.name,100),comment:(0,c.vJ)(r.comment,1e3),location:(0,c.vJ)(r.location,100),service:(0,c.vJ)(r.service,200),rating:Math.max(1,Math.min(5,parseInt(r.rating)||5)),date:new Date().toISOString().split("T")[0],verified:!1};return l.push(p),await n.promises.writeFile(a,JSON.stringify(l,null,2)),o.Z.json(p,{status:201})}catch(t){return console.error("Error adding testimonial:",t),o.Z.json({error:"Yorum eklenemedi."},{status:500})}}async function w(t){try{let e=await t.json(),r=u().join(process.cwd(),"data"),s=u().join(r,"testimonials.json"),i=await n.promises.stat(s).then(()=>!0).catch(()=>!1);if(!i)return o.Z.json({error:"No testimonials found"},{status:404});let a=await n.promises.readFile(s,"utf8"),l=JSON.parse(a),d=l.findIndex(t=>t.id===e.id);if(-1===d)return o.Z.json({error:"Testimonial not found"},{status:404});return l[d]={...l[d],...e},await n.promises.writeFile(s,JSON.stringify(l,null,2)),o.Z.json(l[d],{status:200})}catch(t){return console.error("Error updating testimonial:",t),o.Z.json({error:"Failed to update testimonial"},{status:500})}}async function h(t){try{let e=await t.json(),{id:r}=e,s=u().join(process.cwd(),"data"),i=u().join(s,"testimonials.json"),a=await n.promises.stat(i).then(()=>!0).catch(()=>!1);if(!a)return o.Z.json({error:"No testimonials found"},{status:404});let l=await n.promises.readFile(i,"utf8"),d=JSON.parse(l),c=d.findIndex(t=>t.id===r);if(-1===c)return o.Z.json({error:"Testimonial not found"},{status:404});let m=d.splice(c,1)[0];return await n.promises.writeFile(i,JSON.stringify(d,null,2)),o.Z.json({message:"Testimonial deleted successfully",deletedTestimonial:m},{status:200})}catch(t){return console.error("Error deleting testimonial:",t),o.Z.json({error:"Failed to delete testimonial"},{status:500})}}let g=i.AppRouteRouteModule,y=new g({definition:{kind:a.x.APP_ROUTE,page:"/api/testimonials/route",pathname:"/api/testimonials",filename:"route",bundlePath:"app/api/testimonials/route"},resolvedPagePath:"C:\\Users\\ibrahim\\Downloads\\zero-git\\app\\api\\testimonials\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:x,serverHooks:Z,headerHooks:S,staticGenerationBailout:k}=y,J="/api/testimonials/route"}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[26405,66886,69542,66386],()=>r(41121));module.exports=s})();