(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69966],{35576:function(e,t,a){Promise.resolve().then(a.bind(a,94650))},94650:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(57437),r=a(2265),n=a(24033);let l="app_session",i="secure_key_2024";class o{static setItem(e,t){try{let a=function(e,t){let a="";for(let s=0;s<e.length;s++){let r=e.charCodeAt(s),n=t.charCodeAt(s%t.length);a+=String.fromCharCode(r^n)}return btoa(a)}(t,i);localStorage.setItem("".concat(l,"_").concat(e),a)}catch(e){console.error("Secure storage set error:",e)}}static getItem(e){try{let t=localStorage.getItem("".concat(l,"_").concat(e));if(!t)return null;return function(e,t){try{let a=atob(e),s="";for(let e=0;e<a.length;e++){let r=a.charCodeAt(e),n=t.charCodeAt(e%t.length);s+=String.fromCharCode(r^n)}return s}catch(e){return""}}(t,i)}catch(e){return console.error("Secure storage get error:",e),null}}static removeItem(e){try{localStorage.removeItem("".concat(l,"_").concat(e))}catch(e){console.error("Secure storage remove error:",e)}}static clear(){try{let e=Object.keys(localStorage);e.forEach(e=>{e.startsWith(l)&&localStorage.removeItem(e)})}catch(e){console.error("Secure storage clear error:",e)}}}var c=a(49637);async function d(e,t){await fetch("/api/admin2-log",{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":"admin-token"},body:JSON.stringify({timestamp:new Date().toISOString(),user:"admin2",action:e,details:t})})}function p(){(0,n.useRouter)();let[e,t]=(0,r.useState)("applications"),[a,l]=(0,r.useState)([]),[i,p]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[x,u]=(0,r.useState)({open:!1,text:""}),[b,g]=(0,r.useState)(!1),[w,f]=(0,r.useState)({username:"",password:""}),[j,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(3),[C,_]=(0,r.useState)(0);(0,r.useEffect)(()=>{{!function(){let e=localStorage.getItem("admin2_logged_in");e&&(o.setItem("admin2_logged_in",e),localStorage.removeItem("admin2_logged_in"))}();let e=o.getItem("admin2_logged_in");"true"===e?g(!0):(o.removeItem("admin2_logged_in"),g(!1)),D()}},[]);let D=()=>{let e=c.X.getClientFingerprint(),t=c.X.checkLoginAttempts(e);if(t.allowed)N(!1),S(t.attemptsLeft||3);else{N(!0),_(t.remainingTime||0);let e=setInterval(()=>{_(t=>t<=1e3?(clearInterval(e),N(!1),S(3),y(""),0):t-1e3)},1e3)}};(0,r.useEffect)(()=>{b&&(h(!0),"applications"===e?fetch("/api/quote").then(e=>e.json()).then(e=>{l(e),h(!1)}):"messages"===e&&fetch("/api/messages").then(e=>e.json()).then(e=>{p(e),h(!1)}))},[b,e]);let A=async e=>{e.preventDefault();let t=c.X.getClientFingerprint(),a=c.X.checkLoginAttempts(t);if(!a.allowed){N(!0),_(a.remainingTime||0),y("\xc7ok fazla yanlış giriş denemesi. ".concat(c.X.formatRemainingTime(a.remainingTime||0)," sonra tekrar deneyin."));return}let s=await fetch("/api/admin-users",{headers:{"x-admin-token":"admin-token"}});if(s.ok){let e=await s.json();if(w.username===e.username&&w.password===e.password){c.X.clearLoginAttempts(t),o.setItem("admin2_logged_in","true"),g(!0),y(""),S(3);return}}c.X.recordFailedAttempt(t);let r=c.X.checkLoginAttempts(t);r.allowed?(S(r.attemptsLeft||0),y("Kullanıcı adı veya şifre hatalı. Kalan deneme hakkı: ".concat(r.attemptsLeft||0))):(N(!0),_(r.remainingTime||0),y("\xc7ok fazla yanlış giriş denemesi. ".concat(c.X.formatRemainingTime(r.remainingTime||0)," sonra tekrar deneyin.")))},O=async e=>{await fetch("/api/quote",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),l(t=>t.filter(t=>t.id!==e)),await d("Başvuru Sil",{id:e})},T=async(e,t)=>{await fetch("/api/quote",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,read:t})}),l(a=>a.map(a=>a.id===e?{...a,read:t}:a)),await d("Başvuru Okundu Durumu Değiştir",{id:e,read:t})},I=async e=>{await fetch("/api/messages",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),p(t=>t.filter(t=>t.id!==e)),await d("Mesaj Sil",{id:e})},E=async(e,t)=>{await fetch("/api/messages",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,read:t})}),p(a=>a.map(a=>a.id===e?{...a,read:t}:a)),await d("Mesaj Okundu Durumu Değiştir",{id:e,read:t})};return b?m?(0,s.jsxs)("div",{className:"text-center py-20",children:["applications"===e?"Başvurular":"Mesajlar"," y\xfckleniyor..."]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8 mt-24",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"2. Admin Paneli"}),(0,s.jsxs)("div",{className:"flex gap-4 mb-8 flex-wrap",children:[(0,s.jsx)("button",{onClick:()=>t("applications"),className:"px-4 py-2 rounded ".concat("applications"===e?"bg-blue-600 text-white":"bg-white border"),children:"Başvurular"}),(0,s.jsx)("button",{onClick:()=>t("messages"),className:"px-4 py-2 rounded ".concat("messages"===e?"bg-blue-600 text-white":"bg-white border"),children:"Mesajlar"}),(0,s.jsx)("button",{onClick:()=>{o.removeItem("admin2_logged_in"),g(!1),f({username:"",password:""}),y("")},className:"px-4 py-2 bg-gray-200 rounded",children:"\xc7ıkış Yap"})]}),(0,s.jsxs)("div",{className:"bg-white rounded shadow p-6",children:["applications"===e&&(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xdccretsiz Teşhis Başvuruları"}),m?(0,s.jsx)("div",{children:"Y\xfckleniyor..."}):0===a.length?(0,s.jsx)("div",{children:"Başvuru yok."}):(0,s.jsxs)("table",{className:"w-full text-sm border min-w-[900px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Ad Soyad"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Telefon"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"E-posta"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Marka"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Model"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Sorun"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"A\xe7ıklama"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Lokasyon"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Tarih"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Durum"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"İşlem"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{className:e.read?"bg-gray-50":"bg-yellow-50",children:[(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.name&&e.name.length>24?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.name}),children:"Detay"}):e.name}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"140px"},children:e.phone&&e.phone.length>18?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.phone}),children:"Detay"}):e.phone}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.email&&e.email.length>24?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.email}),children:"Detay"}):e.email}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"120px"},children:(e.brand||e.tvBrand)&&(e.brand||e.tvBrand).length>18?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.brand||e.tvBrand}),children:"Detay"}):e.brand||e.tvBrand}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"120px"},children:(e.model||e.tvModel)&&(e.model||e.tvModel).length>18?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.model||e.tvModel}),children:"Detay"}):e.model||e.tvModel}),(0,s.jsx)("td",{className:"border p-2 whitespace-nowrap",children:e.issue||e.issueType}),(0,s.jsx)("td",{className:"border p-2 max-w-xs",style:{maxWidth:"300px"},children:e.issueDescription||e.description?(e.issueDescription||e.description).length>60?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"truncate inline-block align-middle",style:{maxWidth:"180px",verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.issueDescription||e.description}),(0,s.jsx)("button",{className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.issueDescription||e.description}),children:"Detay"})]}):e.issueDescription||e.description:""}),(0,s.jsx)("td",{className:"border p-2 whitespace-nowrap",children:e.location}),(0,s.jsx)("td",{className:"border p-2 whitespace-nowrap",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,s.jsxs)("td",{className:"border p-2 whitespace-nowrap",children:[e.read?"Okundu":"Yeni",(0,s.jsx)("button",{className:"ml-2 text-xs text-blue-600 underline",onClick:()=>T(e.id,!e.read),children:e.read?"Yeniden işaretle":"Okundu yap"})]}),(0,s.jsx)("td",{className:"border p-2 whitespace-nowrap",children:(0,s.jsx)("button",{className:"text-xs text-red-600 underline",onClick:()=>O(e.id),children:"Sil"})})]},e.id))})]})]}),"messages"===e&&(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"İletişim Mesajları"}),(0,s.jsxs)("table",{className:"w-full text-sm border min-w-[900px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Ad Soyad"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Telefon"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"E-posta"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Konu"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Mesaj"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Tarih"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"Durum"}),(0,s.jsx)("th",{className:"p-2 border whitespace-nowrap",children:"İşlem"})]})}),(0,s.jsx)("tbody",{children:i.map(e=>(0,s.jsxs)("tr",{className:e.read?"bg-gray-50":"bg-yellow-50",children:[(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.name&&e.name.length>24?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.name}),children:"Detay"}):e.name}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"140px"},children:e.phone&&e.phone.length>18?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.phone}),children:"Detay"}):e.phone}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"180px"},children:e.email&&e.email.length>24?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.email}),children:"Detay"}):e.email}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"120px"},children:e.subject&&e.subject.length>18?(0,s.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.subject}),children:"Detay"}):e.subject}),(0,s.jsx)("td",{className:"border p-2 max-w-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"300px"},children:e.message&&e.message.length>60?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"truncate inline-block align-middle",style:{maxWidth:"180px",verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.message}),(0,s.jsx)("button",{className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>u({open:!0,text:e.message}),children:"Detay"})]}):e.message}),(0,s.jsx)("td",{className:"border p-2 whitespace-nowrap",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,s.jsxs)("td",{className:"border p-2 whitespace-nowrap",children:[e.read?"Okundu":"Yeni",(0,s.jsx)("button",{className:"ml-2 text-xs text-blue-600 underline",onClick:()=>E(e.id,!e.read),children:e.read?"Yeniden işaretle":"Okundu yap"})]}),(0,s.jsx)("td",{className:"border p-2 whitespace-nowrap",children:(0,s.jsx)("button",{className:"text-xs text-red-600 underline",onClick:()=>{window.confirm("Bu mesajı silmek istediğinizden emin misiniz?")&&I(e.id)},children:"Sil"})})]},e.id))})]})]}),x.open&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-lg w-full relative",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Detay"}),(0,s.jsx)("div",{className:"text-gray-800 whitespace-pre-line break-words mb-6",style:{maxHeight:"300px",overflowY:"auto"},children:x.text}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-xl",onClick:()=>u({open:!1,text:""}),children:"\xd7"}),(0,s.jsx)("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>u({open:!1,text:""}),children:"Kapat"})]})})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 pt-32 mt-16",children:(0,s.jsxs)("form",{onSubmit:A,className:"bg-white p-8 rounded shadow w-full max-w-xs",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"2. Admin Paneli Giriş"}),v&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"G\xfcvenlik Uyarısı"})]}),(0,s.jsxs)("div",{className:"text-sm mt-1",children:["\xc7ok fazla yanlış giriş denemesi yapıldı.",(0,s.jsx)("br",{}),(0,s.jsxs)("strong",{children:[Math.ceil(C/6e4)," dakika"]})," sonra tekrar deneyin."]})]}),(0,s.jsx)("input",{type:"text",placeholder:"Kullanıcı Adı",value:w.username,onChange:e=>f(t=>({...t,username:e.target.value})),className:"w-full mb-4 px-3 py-2 border rounded ".concat(v?"bg-gray-100 cursor-not-allowed":""),autoFocus:!0,disabled:v}),(0,s.jsx)("input",{type:"password",placeholder:"Şifre",value:w.password,onChange:e=>f(t=>({...t,password:e.target.value})),className:"w-full mb-4 px-3 py-2 border rounded ".concat(v?"bg-gray-100 cursor-not-allowed":""),disabled:v}),!v&&k<3&&(0,s.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-3 py-2 rounded mb-4 text-sm",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,s.jsxs)("span",{children:["Kalan deneme hakkı: ",(0,s.jsx)("strong",{children:k})]})]})}),j&&(0,s.jsx)("div",{className:"mb-4 text-sm ".concat("text-red-600"),children:j}),(0,s.jsx)("button",{type:"submit",className:"w-full py-2 rounded font-bold ".concat(v?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),disabled:v,children:v?"Giriş Engellendi":"Giriş Yap"})]})})}},49637:function(e,t,a){"use strict";a.d(t,{X:function(){return r}});let s="admin_login_attempts";class r{static checkLoginAttempts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=localStorage.getItem("".concat(s,"_").concat(e)),a=Date.now();if(!t)return{allowed:!0,attemptsLeft:3};let r=JSON.parse(t),n=r.filter(e=>a-e.timestamp<6e5);if(n.length>=3){let e=Math.min(...n.map(e=>e.timestamp)),t=6e5-(a-e);return{allowed:!1,remainingTime:t}}let l=3-n.length;return{allowed:!0,attemptsLeft:l}}static recordFailedAttempt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=localStorage.getItem("".concat(s,"_").concat(e)),a=Date.now(),r=t?JSON.parse(t):[];(r=r.filter(e=>a-e.timestamp<6e5)).push({timestamp:a}),localStorage.setItem("".concat(s,"_").concat(e),JSON.stringify(r))}static clearLoginAttempts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";localStorage.removeItem("".concat(s,"_").concat(e))}static formatRemainingTime(e){return"".concat(Math.ceil(e/6e4)," dakika")}static getClientFingerprint(){let e=document.createElement("canvas"),t=e.getContext("2d");t&&(t.textBaseline="top",t.font="14px Arial",t.fillText("Security fingerprint",2,2));let a=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,new Date().getTimezoneOffset(),e.toDataURL()].join("|"),s=0;for(let e=0;e<a.length;e++){let t=a.charCodeAt(e);s=(s<<5)-s+t,s&=s}return Math.abs(s).toString(36)}}},30622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=a(2265),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var s,n={},c=null,d=null;for(s in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,s)&&!o.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},57437:function(e,t,a){"use strict";e.exports=a(30622)},24033:function(e,t,a){e.exports=a(20290)}},function(e){e.O(0,[92971,67864,1744],function(){return e(e.s=35576)}),_N_E=e.O()}]);